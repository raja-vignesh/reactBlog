{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createFirestoreInstance;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _merge2 = _interopRequireDefault(require(\"lodash/fp/merge\"));\n\nvar _reduce2 = _interopRequireDefault(require(\"lodash/reduce\"));\n\nvar _actions = require(\"./actions\");\n\nvar _actions2 = require(\"./utils/actions\");\n\nvar _constants = require(\"./constants\");\n\nfunction createFirestoreInstance(firebase, configs, dispatch) {\n  var defaultInternals = {\n    listeners: {},\n    config: (0, _objectSpread3.default)({\n      defaultConfig: _constants.defaultConfig\n    }, configs)\n  };\n  firebase._ = (0, _merge2.default)(defaultInternals, firebase._);\n  var aliases = [{\n    action: _actions.firestoreActions.deleteRef,\n    name: 'delete'\n  }, {\n    action: _actions.firestoreActions.setListener,\n    name: 'onSnapshot'\n  }];\n  var methods = (0, _actions2.mapWithFirebaseAndDispatch)(firebase, dispatch, _actions.firestoreActions, aliases);\n  var methodsFromFirestore = (0, _reduce2.default)(_constants.methodsToAddFromFirestore, function (acc, methodName) {\n    return firebase.firestore && typeof firebase.firestore()[methodName] === 'function' ? (0, _objectSpread3.default)({}, acc, (0, _defineProperty2.default)({}, methodName, firebase.firestore()[methodName].bind(firebase.firestore()))) : acc;\n  }, {});\n  return Object.assign(methodsFromFirestore, firebase.firestore, {\n    _: firebase._\n  }, configs.helpersNamespace ? (0, _defineProperty2.default)({}, configs.helpersNamespace, methods) : methods);\n}","map":null,"metadata":{},"sourceType":"script"}